import"./modulepreload-polyfill-3cfb730f.js";var c;const i=((c=document.location.ancestorOrigins)==null?void 0:c[0])||document.referrer.replace(/\/$/,"")||"";let p;window.addEventListener("message",async n=>{var l,u;if(n.origin!==i)return;let t=n.data;if((t==null?void 0:t.require)==="exists")(l=chrome==null?void 0:chrome.runtime)!=null&&l.sendMessage?chrome.runtime.sendMessage("behjakjklighlhiefaoogbalmenhbjid",{request:"yuja-version"},o=>{var s;(s=chrome==null?void 0:chrome.runtime)!=null&&s.lastError||!o?window.parent.postMessage({require:t.require,result:!1},i):window.parent.postMessage({require:t.require,result:!0,version:o.version},i)}):window.parent.postMessage({require:t.require,result:!1},i);else if((t==null?void 0:t.type)==="getInstituteId")(u=n.source)==null||u.postMessage({type:"sendInstituteId",instituteId:p},{targetOrigin:i});else if((t==null?void 0:t.type)==="saveInstituteId"&&typeof t.instituteId=="number")p=t.instituteId;else if((t==null?void 0:t.type)==="saveAssessmentUrl"&&typeof t.url=="string")localStorage.setItem("currentAssessmentUrl",t.url),localStorage.setItem("initialPortalState",JSON.stringify({currPage:"extensionSetup",returnToAssessmentInfo:{url:t.url,assessmentInfo:t.assessmentInfo}}));else if((t==null?void 0:t.type)==="saveMobileAssessmentUrl"&&typeof t.url=="string")localStorage.setItem("currentAssessmentUrl",t.url),localStorage.setItem("initialPortalState",JSON.stringify({currPage:"mobileWorkflow",returnToAssessmentInfo:{url:t.url,assessmentInfo:t.assessmentInfo}}));else if((t==null?void 0:t.type)==="saveReportData"&&typeof t.assessmentId=="string")localStorage.setItem("initialPortalState",JSON.stringify({currPage:"assessmentReport",reportContext:{lmsProvidedAssessmentId:t.assessmentId}}));else{const{requestId:o}=t;t=t.payload;const s=r=>{var e;(e=n.source)==null||e.postMessage({responseId:o,payload:r},{targetOrigin:i})};if((t==null?void 0:t.type)==="getLTIRef"&&typeof t.instituteId=="number"){const e=await(await fetch(new URL(`/api/verity/ltiRef/${t.instituteId}`,"https://zone1.verity.yuja.com"))).text();s(e)}else if((t==null?void 0:t.type)==="copyCheck"&&typeof t.instituteId=="number"&&typeof t.assessmentId=="string"&&typeof t.courseId=="string"){const r=new URL(`/api/verity/lms-course/${t.courseId}/lms-assessment/${t.assessmentId}/copy-check?instituteId=${t.instituteId}`,"https://zone1.verity.yuja.com");t.type&&typeof t.type=="string"&&r.searchParams.append("type",t.type),(await fetch(r,{method:"PUT"})).ok?s(!0):s(!1)}else if((t==null?void 0:t.type)==="isAssessmentVerityEnabled"&&typeof t.instituteId=="number"&&typeof t.assessmentId=="string"&&typeof t.courseId=="string"){const r=new URL(`/api/verity/lms-course/${t.courseId}/lms-assessment/${t.assessmentId}/proctored?instituteId=${t.instituteId}`,"https://zone1.verity.yuja.com"),e=await fetch(r);if(e.ok){const a=await e.text();s(a==="true")}else s(!1)}else if((t==null?void 0:t.type)==="getProctoringOptions"&&typeof t.instituteId=="number"&&typeof t.assessmentId=="string"&&typeof t.courseId=="string"){const r=new URL(`/api/verity/lms-course/${t.courseId}/lms-assessment/${t.assessmentId}/proctored/proctoringOption?instituteId=${t.instituteId}`,"https://zone1.verity.yuja.com"),e=await fetch(r);if(e.ok){const a=await e.json();s(a)}else s(void 0)}else if((t==null?void 0:t.type)==="isVersionSupported"&&typeof t.version=="string"){const r=new URL(`/api/verity/platform-info/version/${t.version}`,"https://zone1.verity.yuja.com"),e=await fetch(r);if(e.ok){const f=(await e.json()).versionSupported;s(f)}else s(!1)}else if((t==null?void 0:t.type)==="getPlatformInfo"){const r=new URL("/api/verity/platform-info","https://zone1.verity.yuja.com"),e=await fetch(r);e.ok?s(await e.json()):s(void 0)}}});
//# sourceMappingURL=extension-connect-c049aa92.js.map
